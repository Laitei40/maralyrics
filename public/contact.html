<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contact Us — MaraLyrics</title>
  <meta name="description" content="Get in touch with the MaraLyrics team. Send us a message, suggestion, or inquiry." />
  <meta name="theme-color" content="#0a0e1a" />
  <link rel="icon" type="image/svg+xml" href="/icon.svg" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/style.css" />
  <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
</head>
<body>

  <!-- ═══ Header ═══ -->
  <header class="header">
    <div class="header__inner">
      <a href="/" class="header__logo">
        <img src="/icon.svg" alt="MaraLyrics" class="header__logo-icon" />
        MaraLyrics
      </a>
      <nav class="header__nav">
        <a href="/" class="header__nav-link" data-i18n="nav.home">Home</a>
        <a href="/#popular" class="header__nav-link" data-i18n="nav.popular">Popular</a>
        <div class="settings-toggle">
          <button class="settings-toggle__btn" aria-label="Settings" title="Settings">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06A1.65 1.65 0 004.68 15a1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 012.83-2.83l.06.06A1.65 1.65 0 009 4.68a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06A1.65 1.65 0 0019.4 9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z"/></svg>
          </button>
          <div class="settings-panel">
            <div class="settings-panel__section">
              <div class="settings-panel__label">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"/></svg>
                Language
              </div>
              <div class="settings-panel__options">
                <button class="lang-switcher__btn active" data-lang="en">EN</button>
                <button class="lang-switcher__btn" data-lang="mrh">Mara</button>
                <button class="lang-switcher__btn" data-lang="my">မြန်မာ</button>
              </div>
            </div>
            <div class="settings-panel__divider"></div>
            <div class="settings-panel__section">
              <div class="settings-panel__label">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
                Theme
              </div>
              <div class="settings-panel__options">
                <button class="theme-switcher__btn" data-theme="dark" title="Dark"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg></button>
                <button class="theme-switcher__btn" data-theme="light" title="Light"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button>
                <button class="theme-switcher__btn" data-theme="system" title="Follow System"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg></button>
                <button class="theme-switcher__btn" data-theme="time" title="Follow Time"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg></button>
              </div>
            </div>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <!-- ═══ Contact Content ═══ -->
  <main class="static-page container">

    <nav class="breadcrumb" aria-label="Breadcrumb">
      <a href="/" class="breadcrumb__link">Home</a>
      <span class="breadcrumb__sep">›</span>
      <span class="breadcrumb__current">Contact Us</span>
    </nav>

    <div class="static-page__card">

      <h1 class="static-page__title">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:8px;color:var(--accent);" stroke-linecap="round" stroke-linejoin="round">
          <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/>
        </svg>
        Contact Us
      </h1>

      <section class="static-page__section">
        <p>Have a question, suggestion, or want to contribute to MaraLyrics? We'd love to hear from you. Fill out the form below or reach out directly via email.</p>
        <p class="contact-email">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;margin-right:6px;"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
          <a href="mailto:contact@maralyrics.com">contact@maralyrics.com</a>
        </p>
      </section>

      <!-- Contact Form -->
      <form id="contactForm" class="report-page__form">

        <div class="form-group">
          <label class="form-label" for="contactName">Your Name <span class="form-required">*</span></label>
          <input type="text" id="contactName" class="form-input" placeholder="Enter your name" required />
        </div>

        <div class="form-group">
          <label class="form-label" for="contactEmail">Your Email <span class="form-required">*</span></label>
          <input type="email" id="contactEmail" class="form-input" placeholder="you@example.com" required />
        </div>

        <div class="form-group">
          <label class="form-label" for="contactSubject">Subject</label>
          <input type="text" id="contactSubject" class="form-input" placeholder="What is this about?" />
        </div>

        <div class="form-group">
          <label class="form-label" for="contactMessage">Message <span class="form-required">*</span></label>
          <textarea id="contactMessage" class="form-input form-textarea" rows="6" placeholder="Write your message here..." required></textarea>
        </div>

        <div id="contactMsg" class="report-page__message" style="display:none;"></div>

        <!-- Cloudflare Turnstile -->
        <div class="cf-turnstile" data-sitekey="0x4AAAAAABjildkegfR6T0sd" data-theme="dark"></div>

        <div class="report-page__actions">
          <button type="submit" class="btn-send-feedback" id="btnSubmitContact">
            <span class="btn-send-feedback__icon">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/>
              </svg>
            </span>
            <span class="btn-send-feedback__text">Send Message</span>
          </button>
          <a href="/" class="btn btn--ghost">← Back</a>
        </div>
      </form>

    </div>

    <!-- Success State -->
    <div id="contactSuccess" class="static-page__card report-page__success" style="display:none;">
      <div class="report-page__success-icon">✅</div>
      <h2 class="report-page__success-title">Message Sent!</h2>
      <p class="report-page__success-text">Thank you for reaching out. We'll get back to you as soon as possible.</p>
      <a href="/" class="btn btn--primary" style="margin-top:var(--space-lg);">← Back to Home</a>
    </div>

  </main>

  <!-- ═══ Footer ═══ -->
  <footer class="footer">
    <div class="container">
      <div class="footer__grid">
        <div class="footer__col">
          <a href="/" class="footer__brand">
            <img src="/icon.svg" alt="MaraLyrics" class="footer__brand-icon" />
            MaraLyrics
          </a>
          <p class="footer__tagline">Preserving Mara music for future generations.</p>
        </div>
        <div class="footer__col">
          <h4 class="footer__heading">Information</h4>
          <ul class="footer__links">
            <li><a href="/about">About Us</a></li>
            <li><a href="/faq">FAQ</a></li>
          </ul>
        </div>
        <div class="footer__col">
          <h4 class="footer__heading">Legal</h4>
          <ul class="footer__links">
            <li><a href="/privacy">Privacy Policy</a></li>
            <li><a href="/terms">Terms &amp; Conditions</a></li>
            <li><a href="/copyright">Copyright</a></li>
          </ul>
        </div>
        <div class="footer__col">
          <h4 class="footer__heading">Support</h4>
          <ul class="footer__links">
            <li><a href="/contact">Contact Us</a></li>
            <li><a href="/report">Report Error</a></li>
          </ul>
        </div>
      </div>
      <div class="footer__bottom">
        <p>Made with <span class="footer__heart">♥</span> for the Mara community</p>
        <p>&copy; 2026 MaraLyrics. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script src="/i18n.js"></script>
  <script src="/theme.js"></script>
  <script>
    I18n.init();
    Theme.init();
    (function() {
      const togBtn = document.querySelector('.settings-toggle__btn');
      const togWrap = document.querySelector('.settings-toggle');
      if (togBtn && togWrap) {
        togBtn.addEventListener('click', (e) => { e.stopPropagation(); togWrap.classList.toggle('open'); });
        document.addEventListener('click', (e) => { if (!togWrap.contains(e.target)) togWrap.classList.remove('open'); });
      }
    })();

    // ─── Contact Form Logic ──────────────────────────
    (function () {
      const API_BASE = (location.hostname.includes('.pages.dev') || location.hostname.includes('localhost'))
        ? 'https://maralyrics.teiteipara.workers.dev'
        : '';

      document.getElementById('contactForm').addEventListener('submit', async function (e) {
        e.preventDefault();

        const name = document.getElementById('contactName').value.trim();
        const email = document.getElementById('contactEmail').value.trim();
        const subject = document.getElementById('contactSubject').value.trim();
        const message = document.getElementById('contactMessage').value.trim();
        const msgEl = document.getElementById('contactMsg');

        if (!name || !email || !message) {
          msgEl.textContent = 'Please fill in all required fields.';
          msgEl.className = 'report-page__message report-page__message--error';
          msgEl.style.display = 'block';
          return;
        }

        const btn = document.getElementById('btnSubmitContact');
        btn.disabled = true;
        btn.textContent = 'Sending...';

        const turnstileToken = document.querySelector('[name="cf-turnstile-response"]')?.value;
        if (!turnstileToken) {
          msgEl.textContent = 'Please complete the security check.';
          msgEl.className = 'report-page__message report-page__message--error';
          msgEl.style.display = 'block';
          btn.disabled = false;
          btn.innerHTML = '<span class="btn-send-feedback__icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg></span><span class="btn-send-feedback__text">Send Message</span>';
          return;
        }

        try {
          const res = await fetch(API_BASE + '/api/contact', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              name, email, subject, message,
              turnstile_token: turnstileToken,
            }),
          });

          if (!res.ok) {
            const err = await res.json().catch(() => ({}));
            throw new Error(err.error || 'Failed to send message.');
          }

          document.querySelector('.static-page__card').style.display = 'none';
          document.getElementById('contactSuccess').style.display = 'block';

        } catch (err) {
          msgEl.textContent = err.message || 'Something went wrong. Please try again.';
          msgEl.className = 'report-page__message report-page__message--error';
          msgEl.style.display = 'block';
        } finally {
          btn.disabled = false;
          btn.innerHTML = '<span class="btn-send-feedback__icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg></span><span class="btn-send-feedback__text">Send Message</span>';
          if (window.turnstile) turnstile.reset();
        }
      });
    })();
  </script>
</body>
</html>
